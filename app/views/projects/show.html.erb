<main class="team_page">
<h2><%= @current_project.project_name %></h2>

<aside>
  <% if user_signed_in? && @user.in_team?(@team) && @competition.in_competition_window?(@team.time_zone) %>
  <p><%= link_to 'Manage this Team Project', team_management_team_path(@team) %></p>
  <% end %>
  <% if @favourite.present? %>
    <p><%= link_to 'Unfavourite this Project', favourite_path(@favourite),
                  method: :delete %></p>
  <% else %>
    <p><%= link_to 'Favourite this Project', favourites_path(team_id: @team.id), method: :post %></p>
  <% end %>
</aside>

<h3>Project Info</h3>

<%= render 'team_project_info' %>

<h3>Team DataSets</h3>

<section class="markdown">

<% if (team_data_sets = @team.team_data_sets).present? %>

  <% team_data_sets.each do |team_data_set| %>
    <%= render 'team_data_set', locals: { data_set: team_data_set } %>
  <% end %>

<% else %>
  <div>This team does not currently have any datasets.</div>
<% end %>

</section>
<h3>Challenges</h3>
<section class="markdown">
  <% if passed_checkpoints.present? %>

    <% if @entries_to_display.present? %>

      <% @entries_to_display.each do |entry| %>
        <% challenge = entry.challenge %>
        <section class="markdown">
            <h4><%= challenge.name %></h4>
            <p><strong>Region</strong>: <%= @id_regions[challenge.region_id].name %></p>
            <%= link_to 'Challenge', challenge_path(challenge) %>
        </section>

      <% end %>

    <% else %>

      <p>There are no challenges to display for this team as yet.</p>

    <% end %>

  <% else %>

    <p>Check back here once the first checkpoint passes to see the challenges
      this team has entered.</p>

  <% end %>

</section>

<%= link_to 'Back to Projects', projects_path %>
  </main>
