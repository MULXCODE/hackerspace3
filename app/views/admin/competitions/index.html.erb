<h2>Competiton Management</h2>

<h3>Competition Director</h3>

<% if (director = @competition.director).present? %>
  Full Name: <%= director.full_name %></br>
<% else %>
  <%= form_tag("/admin/assignments", method: "post") do %>
    <%= label_tag(:email, "User Email:") %>
    <%= text_field_tag(:email) %>
    <%= hidden_field_tag(:title, COMPETITION_DIRECTOR) %>
    <%= hidden_field_tag(:assignable_type, 'Competition') %>
    <%= hidden_field_tag(:assignable_id, @competition.id) %>
    <%= submit_tag("Assign New #{COMPETITION_DIRECTOR}") %>
  <% end %>
<% end %>

<h3>GovHack Management Team</h3>

<table>
  <tr>
    <th>Full Name</th>
    <th>E-mail</th>
  </tr>
  <% @competition.management_team.each do |assignment| %>
    <% user = assignment.user %>
    <tr>
      <td><%= user.full_name %></td>
      <td><%= user.email %></td>
    </tr>
  <% end %>
</table>

<%= form_tag("/admin/assignments", method: "post") do %>
  <%= label_tag(:email, "User Email:") %>
  <%= text_field_tag(:email) %>
  <%= hidden_field_tag(:title, MANAGEMENT_TEAM) %>
  <%= hidden_field_tag(:assignable_type, 'Competition') %>
  <%= hidden_field_tag(:assignable_id, Competition.current.id) %>
  <%= submit_tag("Assign New #{MANAGEMENT_TEAM} Member") %>
<% end %>

<h3>Site Admin</h3>

<table>
  <tr>
    <th>Full Name</th>
    <th>E-mail</th>
  </tr>
  <% @competition.site_admin.each do |assignment| %>
    <% user = assignment.user %>
    <tr>
      <td><%= user.full_name %></td>
      <td><%= user.email %></td>
    </tr>
  <% end %>
</table>
