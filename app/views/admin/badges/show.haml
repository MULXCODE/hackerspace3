- content_for :title, "#{@badge.name} Badge"
%main.team_page
  %section
    %h2= yield :title
    = link_to 'edit badge', edit_admin_competition_badge_path(@competition, @badge), class: 'download-csv'
    %p
      %strong
        Name:
      = @badge.name
    %p
      %strong
        Capacity:
      = @badge.capacity || '-'
    %p= link_to 'Delete Badge', admin_competition_badge_path(@competition, @badge), |
      method: :delete,                                                                          |
      data: { confirm: 'Are you sure you want to delete this badge?...and its awards' }
    %h3 Badge Claimes
    %table.projects-table#admin-badge-table{'data-turbolinks' => 'false'}
      %thead
        %th Full Name
        %th Preferred Name
        %th Email
        %th Profile Identifier
        %th Award
      %tbody
        - @users.each do |user|
          %tr
            %td= user.full_name
            %td= user.preferred_name
            %td= user.email
            %td
              - if (user.profile&.identifier).present?
                = link_to(user.profile.identifier, profile_path(user.profile))
              - else
                [none]
            %td
              - if @badge_assignments.find {|a| a.user_id == user.id }.present?
                Badge Awarded
              - else
                = link_to 'Award Badge', award_admin_competition_badge_path(@competition, @badge,  assignment: { user_id: user.id }), method: :post

    = link_to 'Back to Badges', admin_competition_badges_path(@competition)
