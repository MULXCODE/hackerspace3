<h2><%= @region.name %></h2>

<% if @region.time_zone %>
  Time Zone: <%= @region.time_zone %></br>
<% end %>

<h3>Region Director</h3>

<% if (director = @region.director).present? %>
  <%= render 'admin/shared/user_contact', locals: { user: director } %>
<% else %>
  This region does not currently have a director.<br>
  <%= link_to "New #{REGION_DIRECTOR} Assignment", new_admin_region_assignment_path(@region, title: REGION_DIRECTOR) %><br>
<% end %>

<h3>Region Support</h3>

<%= pluralize @region.supports.count, 'region support' %> currently assigned to event.<br>

<%= link_to "Manage #{@region.name} Assignments", admin_region_assignments_path(@region) %>

<h3>Events</h3>

<% if (events = @region.events.where(competition: Competition.current)).present? %>

  <% events.each do |event| %>
    <h4><%= event.name %></h4>
    <%= link_to "Manage #{event.name}", admin_region_event_path(@region, event) %></br>
  <% end %>

<% else %>
    <div>There are currently no events planned for the current Competitition.</div>
<% end %>

<%= link_to "Create New events Event", new_admin_region_event_path(@region) %></br>

<h3>Sponsorships</h3>

<% if (sponsorships = @region.sponsorships).present? %>

  <% sponsorships.each do |sponsorship| %>
    <%= render 'admin/sponsors/sponsor', locals: { sponsor: sponsorship.sponsor } %>
    Sponsorship Type: <%= sponsorship.sponsorship_type.name %><br>
  <% end %>

<% else %>

  <div>There are currently no sponsorships for this region in the current competition.</div>

<% end %>

<%= link_to 'Add Sponsorship', new_admin_region_sponsorship_path(@region) %><br>

<h3>Challenges</h3>

<% if (challenges = @region.challenges).present? %>

  <% challenges.each do |challenge| %>
    Name: <%= challenge.name %><br>
    <% unless challenge.short_desc.blank? %>
      Short Description: <%= challenge.short_desc %><br>
    <% end %>
    <%= link_to 'Go to Challenge', admin_region_challenge_path(@region, challenge) %><br>
  <% end %>

<% else %>

  <div>There are currently no challenges for this region in the current competition.</div>

<% end %>

<%= link_to "Create New Challenge for #{@region.name}", new_admin_region_challenge_path(@region) %><br>

<% if (parent = @region.parent).nil? %>
  <%= link_to 'Back to Regions', admin_regions_path %><br>
<% else %>
  <%= link_to "Back to #{parent.name} Region", admin_region_path(parent)  %><br>
<% end %>
